{% extends 'main/layout.html' %}

{% block title %}Profile{% endblock %}

{% block content %}
<div class="profile-page">
    <h1 class="profile-section-title">Welcome, {{ request.user.username }}!</h1>

    <div class="profile-avatar-section">
        {% if request.user.profile.avatar %}
            <img src="{{ request.user.profile.avatar.url }}" alt="Avatar" class="profile-avatar">
        {% else %}
            <p>No avatar uploaded</p>
        {% endif %}
    </div>

    <div class="profile-info">
        <p><strong>Email:</strong> {{ request.user.email }}</p>
        <p><strong>Date joined:</strong> {{ request.user.date_joined|date:"d M Y H:i" }}</p>
        <p><strong>Last login:</strong> {{ request.user.last_login|date:"d M Y H:i" }}</p>
        <p><strong>Status:</strong> {% if request.user.is_active %}Active{% else %}Inactive{% endif %}</p>
    </div>

    <h3 class="profile-section-title">Actions</h3>
    <div class="action-buttons">
        <form action="{% url 'password_change' %}" method="post">
            {% csrf_token %}
            <button type="submit">Change password</button>
        </form>

        <form action="{% url 'logout' %}" method="post">
            {% csrf_token %}
            <button type="submit">Logout</button>
        </form>
    </div>

    <h3 class="profile-section-title">Change Avatar</h3>
   <form method="post" enctype="multipart/form-data" class="profile-avatar-form">
    {% csrf_token %}
    
    <label class="custom-file-upload">
        Choose new avatar
        <input type="file" name="avatar">
    </label>
    
    <button type="submit" class="upload-avatar">Upload Avatar</button>
</form>
</div>
{% endblock %}
